---
import GlassPanel from './GlassPanel.astro';
import type { ExperienceItem } from './types';

interface Props {
  journey: ExperienceItem[];
}

const { journey } = Astro.props;

const formatter = new Intl.DateTimeFormat('en-US', { month: 'short', year: 'numeric' });
---

<section id="journey" class="py-20 bg-[rgb(var(--color-bg-secondary)/0.35)]">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-3xl sm:text-4xl font-bold">Journey Timeline</h2>
    <div class="mt-10 space-y-6 border-l border-[rgb(var(--color-border))] pl-6">
      {journey.map((item) => (
        <GlassPanel class="p-5 relative">
          <span class="absolute -left-[34px] top-6 h-3 w-3 rounded-full bg-[rgb(var(--color-accent))]" />
          <p class="text-sm text-[rgb(var(--color-text-muted))]">
            {formatter.format(item.startDate)} - {item.endDate ? formatter.format(item.endDate) : 'Present'}
          </p>
          <h3 class="mt-1 text-lg font-semibold">{item.role} Â· {item.company}</h3>
          {item.location && <p class="text-sm text-[rgb(var(--color-text-muted))] mt-1">{item.location}</p>}
          <ul class="mt-3 list-disc list-inside text-[rgb(var(--color-text-secondary))] space-y-1">
            {item.tasks.slice(0, 2).map((task) => <li>{task}</li>)}
          </ul>
        </GlassPanel>
      ))}
    </div>
  </div>
</section>
